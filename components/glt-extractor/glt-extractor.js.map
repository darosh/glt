{"version":3,"file":"glt-extractor.js","sources":["../glt/src/utils/isObject.js","../glt/src/utils/each.js","../glt/src/features/blend.js","../glt/src/features/names.js","../glt/src/features/transform.js","../glt/src/features/modify.js","../glt/src/features/generator.js","../glt/src/features/colorize.js","../glt/src/features/desaturate.js","../glt/src/features/index.js","index.js"],"sourcesContent":["export function isObject(obj) {\r\n    return (obj instanceof Object) && !(obj instanceof Array);\r\n}\r\n","import {isObject} from './isObject';\r\n\r\nexport function each(obj, fnc) {\r\n    if (isObject(obj)) {\r\n        Object.keys(obj).forEach((key) => fnc(key, obj[key]));\r\n    }\r\n}\r\n","export const blend = {\r\n    HardMix: 'blendHardMix',\r\n    VividLight: 'blendVividLight',\r\n    LinearLight: 'blendLinearLight',\r\n    PinLight: 'blendPinLight',\r\n    Glow: 'blendGlow',\r\n    HardLight: 'blendHardLight',\r\n    Phoenix: 'blendPhoenix',\r\n    Overlay: 'blendOverlay',\r\n    Normal: 'blendNormal',\r\n    Negation: 'blendNegation',\r\n    Multiply: 'blendMultiply',\r\n    Reflect: 'blendReflect',\r\n    Average: 'blendAverage',\r\n    LinearBurn: 'blendLinearBurn',\r\n    Lighten: 'blendLighten',\r\n    Screen: 'blendScreen',\r\n    SoftLight: 'blendSoftLight',\r\n    Subtract: 'blendSubtract',\r\n    Exclusion: 'blendExclusion',\r\n    Difference: 'blendDifference',\r\n    Darken: 'blendDarken',\r\n    ColorDodge: 'blendColorDodge',\r\n    ColorBurn: 'blendColorBurn',\r\n    Add: 'blendAdd',\r\n    LinearDodge: 'blendLinearDodge'\r\n};\r\n\r\n// Object.keys(blend).sort().forEach((k, i) => blend[i] = k);\r\n","export const POSITION = 'POSITION';\r\nexport const VALUE = 'VALUE';\r\nexport const COLOR = 'COLOR';\r\n\r\nexport const POS = 'pos';\r\n\r\nexport const PARAM = {\r\n    type: 0,\r\n    name: 1,\r\n    value: 2,\r\n    range: 3,\r\n    placeholder: 4,\r\n    input: 5\r\n};\r\n\r\nexport const FLOAT = 'FLOAT';\r\nexport const VEC2 = 'VEC2';\r\nexport const VEC3 = 'VEC3';\r\n","import {VALUE} from './names';\r\n\r\nexport let Distort = {\r\n    params: [['float', 'weight', 1, [-8, 8]], ['float', VALUE, 1, [-1, 1]]]\r\n};\r\n\r\nexport let Warp = {\r\n    params: [['float', 'wx', 1, [-8, 8]], ['float', 'wy', 1, [-8, 8]], ['float', VALUE, 1, [-1, 1]], ['float', VALUE, 1, [-1, 1]]]\r\n};\r\n\r\nexport const Rotate = {\r\n    params: [['float', 'angle', 0, [0, 360]]]\r\n};\r\n\r\nexport const Scale = {\r\n    params: [['vec2', 'scale', [1, 1], [-16, 16]]]\r\n};\r\n\r\nexport const Translate = {\r\n    params: [['vec2', 'offset', [0, 0], [-128, 128]]]\r\n};\r\n\r\nexport const Tile = {\r\n    params: [['vec2', 'size', [0, 0], [2, 16]], ['float', 'mirrorX', 0, [0, 1]], ['float', 'mirrorY', 0, [0, 1]]]\r\n};\r\n\r\nexport const Pixelate = {\r\n    params: [['float', 'steps', 8, [2, 128]]]\r\n};\r\n\r\nexport const Twirl = {\r\n    params: [['float', 'weight', 8, [-16, 16]], ['float', 'size', 2, [0, 16]], ['vec2', 'offset', [0, 0], [0, 32]]]\r\n};\r\n","export const Normalize = {};\r\nexport const Denormalize = {};\r\nexport const Invert = {};\r\nexport const Abs = {};\r\nexport const Cos = {};\r\nexport const Sin = {};\r\n\r\nexport const AddValue = {\r\n    params: [['float', 'value', 0.5, [-2,2]]]\r\n};\r\n\r\nexport const Min = {\r\n    glsl: 'min',\r\n    params: [['float', 'value', 0.5, [-2,2]]]\r\n};\r\n\r\nexport const Max = {\r\n    glsl: 'max',\r\n    params: [['float', 'value', 0.5, [-2,2]]]\r\n};\r\n\r\nexport const MultiplyValue = {\r\n    params: [['float', 'value', 0.5, [-2,2]]]\r\n};\r\n\r\nexport const SmoothStep = {\r\n    params: [['float', 'edge0', 0, [-2,2]], ['float', 'edge1', 1, [-2,2]]]\r\n};\r\n\r\nexport const Posterize = {\r\n    params: [['float', 'steps', 8, [2,32]], ['float', 'gamma', 0.6,[0,2]]]\r\n};\r\n\r\nexport const Bias = {\r\n    params: [['float', 'bias', 0.25, [0,1]]]\r\n};\r\n\r\nexport const Gain = {\r\n    params: [['float', 'gain', 0.25, [0,1]]]\r\n};\r\n\r\nexport const Clamp = {\r\n    params: [['float', 'from', 0, [-1,1]], ['float', 'to', 1, [-1,1]]]\r\n};\r\n","import {POS, POSITION, VALUE} from './names';\r\n\r\nexport const X = {};\r\nexport const Y = {};\r\nexport const Length = {};\r\nexport const SinX = {\r\n    scale: 16\r\n};\r\nexport const SinY = {\r\n    scale: 16\r\n};\r\nexport const SinXY = {\r\n    scale: 16\r\n};\r\n\r\nexport const Xor = {\r\n    scale: 256\r\n};\r\n\r\n// export const Color = {\r\n//     glsl: 'vec3',\r\n//     color: true,\r\n//     position: false,\r\n//     params: ['vec3', 'color', [1, 1, 1]]\r\n// };\r\n\r\nexport const Value = {\r\n    glsl: 'float',\r\n    position: false,\r\n    params: [['float', 'value', 1, [-1, 1]]]\r\n};\r\n\r\nexport const SimplexNoise = {\r\n    glsl: 'snoise',\r\n    normalized: false\r\n};\r\n\r\nexport const Checker = {\r\n    glsl: 'checker',\r\n    params: [['float', 'repeats', 2, [1, 128]]]\r\n};\r\n\r\nexport const PerlinNoise = {\r\n    glsl: 'cnoise',\r\n    normalized: false,\r\n    scale: 4\r\n};\r\n\r\nexport const PeriodicNoise = {\r\n    glsl: 'pnoise',\r\n    params: [['vec2', 'size', [16, 16], [1, 128]]],\r\n    normalized: false,\r\n    scale: 4\r\n};\r\n\r\nexport const WorleyF1 = {\r\n    params: [['float', 'jitter', 1, [0, 1]], ['float', 'manhattanDistance', 0, [0, 1]]],\r\n    scale: 2,\r\n    examples: [\r\n        [0.5, 0],\r\n        [0, 0],\r\n        [1, 1]\r\n    ]\r\n};\r\n\r\nexport const WorleyF2 = {\r\n    params: [['float', 'jitter', 1, [0, 1]], ['float', 'manhattanDistance', 0, [0, 1]]],\r\n    scale: 2,\r\n    examples: [\r\n        [0.5, 0],\r\n        [0, 0],\r\n        [1, 1]\r\n    ]\r\n};\r\n\r\nexport const WorleyF1F2 = {\r\n    params: [['float', 'jitter', 1, [0, 1]], ['float', 'manhattanDistance', 0, [0, 1]]],\r\n    scale: 2,\r\n    examples: [\r\n        [0.5, 0],\r\n        [0, 0],\r\n        [1, 1],\r\n        [0, 1]\r\n    ]\r\n};\r\n\r\nexport const WorleyF2F1 = {\r\n    params: [['float', 'jitter', 1, [0, 1]], ['float', 'manhattanDistance', 0, [0, 1]]],\r\n    scale: 2,\r\n    examples: [\r\n        [0.5, 0],\r\n        [0, 0],\r\n        [1, 1]\r\n    ]\r\n};\r\n\r\nexport const WorleyCrackle = {\r\n    params: [['float', 'jitter', 1, [0, 1]], ['float', 'manhattanDistance', 0, [0, 1]], ['float', 'multiply', 8, [1, 32]], ['float', 'divide', 2, [1, 32]], ['float', 'offset', 0.5, [0, 8]]],\r\n    scale: 2,\r\n    examples: [\r\n        [0.5, 0, 8, 2, 0.5],\r\n        [0, 0, 8, 2, 0.5],\r\n        [1, 1, 8, 2, 0.5],\r\n        [1, 0, 32, 2, 0.5],\r\n        [1, 0, 32, 1, 2],\r\n        [1, 0, 32, 1, 4],\r\n        [1, 1, 32, 1, 4],\r\n        [0.25, 1, 32, 1, 4]\r\n    ]\r\n};\r\n\r\nexport const RidgedMultiFractal = {\r\n    glsl: 'ridgedMultiFractal',\r\n    params: [['float', 'H', 0.25, [0, 8]], ['float', 'lacunarity', 2, [0, 8]], ['float', 'frequency', 2, [0, 8]], ['float', 'octaves', 6, [1, 12]], ['float', 'offset', .9, [-2, 2]], ['float', 'gain', 1.5, [-8, 8]]],\r\n    scale: 1,\r\n    examples: [\r\n        [0.25, 1, 1, 1, 1.01, 1],\r\n        [0.25, 3, 1, 9, 1.01, 1]\r\n    ]\r\n};\r\n\r\nexport const HybridMultiFractal = {\r\n    glsl: 'hybridMultiFractal',\r\n    params: [['float', 'H', 0.25, [0, 8]], ['float', 'lacunarity', 3, [0, 8]], ['float', 'frequency', 2, [0, 8]], ['float', 'octaves', 6, [1, 12]], ['float', 'offset', .05, [-2, 2]]],\r\n    normalized: false,\r\n    scale: 1,\r\n    examples: [\r\n        [0.1, 1.5, 3, 6, 0]\r\n    ]\r\n};\r\n\r\nexport const HeteroTerrain = {\r\n    glsl: 'heteroTerrainA',\r\n    params: [['float', 'H', 0.5, [0.01, 3]], ['float', 'lacunarity', 2, [1, 3]], ['float', 'frequency', 2, [1, 8]], ['float', 'octaves', 6, [1, 8]], ['float', 'offset', .05, [-1, 1]]],\r\n    normalized: false,\r\n    scale: 1,\r\n    examples: [\r\n        [2, 1.5, 3, 2, 0]\r\n    ]\r\n};\r\n\r\nexport const MultiFractal = {\r\n    glsl: 'multifractalA',\r\n    params: [\r\n        ['float', 'H', 0.5, [0.01, 2]],\r\n        ['float', 'lacunarity', 2, [1, 2]],\r\n        ['float', 'frequency', 2, [1, 8]],\r\n        ['float', 'octaves', 6, [1, 8]],\r\n        ['float', 'offset', .8, [-1, 1]],\r\n        ['float', 'noise', null, null, 'snoise', [['vec2', POS]]]\r\n    ],\r\n    scale: 1,\r\n    examples: [\r\n        [1.5, 1.5, 4, 6, 0.85]\r\n    ]\r\n};\r\n\r\nexport const FBm = {\r\n    glsl: 'fBmA',\r\n    params: [['float', 'H', 0.5, [0, 8]], ['float', 'lacunarity', 2, [0, 8]], ['float', 'frequency', 2, [0, 8]], ['float', 'octaves', 6, [1, 12]]],\r\n    normalized: false,\r\n    scale: 1,\r\n    examples: [\r\n        [0.85, 2.5, 4, 6]\r\n    ]\r\n};\r\n\r\nexport let RGB = {\r\n    glsl: 'vec3',\r\n    color: true,\r\n    position: false,\r\n    params: [['float', VALUE, 1, [0, 1]], ['float', VALUE, 1, [0, 1]], ['float', VALUE, 1, [0, 1]]]\r\n};\r\n\r\nexport let HSV = {\r\n    glsl: 'HSV',\r\n    color: true,\r\n    position: false,\r\n    params: [['float', VALUE, 1, [0, 1]], ['float', VALUE, 1, [0, 1]], ['float', VALUE, 1, [0, 1]]],\r\n};\r\n","// http://iquilezles.org/www/articles/palettes/palettes.htm\r\nexport const CosPalette = {\r\n    glsl: 'cosPalette',\r\n    params: [\r\n        ['vec3', 'a', [0.5, 0.5, 0.5], [0, 1]],\r\n        ['vec3', 'b', [0.5, 0.5, 0.5], [0, 1]],\r\n        ['vec3', 'c', [1.0, 1.0, 1.0], [0, 1]],\r\n        ['vec3', 'd', [0.0, 0.33, 0.67], [0, 1]]\r\n    ],\r\n    examples: [\r\n        [[0.5, 0.5, 0.5], [0.5, 0.5, 0.5], [1.0, 1.0, 1.0], [0.0, 0.33, 0.67]],\r\n        [[0.5, 0.5, 0.5], [0.5, 0.5, 0.5], [1.0, 1.0, 1.0], [0.0, 0.10, 0.20]],\r\n        [[0.5, 0.5, 0.5], [0.5, 0.5, 0.5], [1.0, 1.0, 1.0], [0.3, 0.20, 0.20]],\r\n        [[0.5, 0.5, 0.5], [0.5, 0.5, 0.5], [1.0, 1.0, 0.5], [0.8, 0.90, 0.30]],\r\n        [[0.5, 0.5, 0.5], [0.5, 0.5, 0.5], [1.0, 0.7, 0.4], [0.0, 0.15, 0.20]],\r\n        [[0.5, 0.5, 0.5], [0.5, 0.5, 0.5], [2.0, 1.0, 0.0], [0.5, 0.20, 0.25]],\r\n        [[0.8, 0.5, 0.4], [0.2, 0.4, 0.2], [2.0, 1.0, 1.0], [0.0, 0.25, 0.25]]\r\n    ]\r\n};\r\n\r\nexport const Tint = {\r\n    color: true,\r\n    params: [['vec3', 'color', [0.5, 0.5, 0.5], [0, 1]]]\r\n};\r\n","export const Grayscale = {};\r\n","import {each} from '../utils/each';\r\nimport {blend} from './blend';\r\nimport * as transform from './transform';\r\nimport * as modify from './modify';\r\nimport * as generator from './generator';\r\nimport * as colorize from './colorize';\r\nimport * as desaturate from './desaturate';\r\nimport {COLOR, VALUE, POSITION} from './names';\r\n\r\nexport const features = {\r\n    blend: blend,\r\n    transform: transform,\r\n    modify: modify,\r\n    generator: generator,\r\n    colorize: colorize,\r\n    desaturate: desaturate\r\n};\r\n\r\nexport const types = {\r\n    blend: 'blend',\r\n    transform: 'transform',\r\n    modify: 'modify',\r\n    generator: 'generator',\r\n    colorize: 'colorize',\r\n    desaturate: 'desaturate'\r\n};\r\n\r\nfunction expand() {\r\n    each(features, (k) => {\r\n        each(features[k], (m) => {\r\n            // console.log(features[k][m]);\r\n            let f = features[k][m];\r\n\r\n            if (typeof f === 'string') {\r\n                features[k][m] = f = {\r\n                    glsl: f\r\n                };\r\n            }\r\n\r\n            expandFeature(f, k, m);\r\n        });\r\n    });\r\n}\r\n\r\nexport const glsls = [];\r\n\r\nfunction expandFeature(f, k, m) {\r\n    f.type = k;\r\n    f.name = m;\r\n    f.glsl = f.glsl || m;\r\n    f.params = f.params || [];\r\n    f.variants = variants[k](f);\r\n\r\n    glsls.push(f.glsl);\r\n}\r\n\r\nconst variants = {\r\n    blend: () => [\r\n        {\r\n            output: 'float',\r\n            input: [['float', VALUE, 0.5, [0, 1]], ['float', VALUE, 0.5, [0, 1]]]\r\n        },\r\n        {\r\n            output: 'float',\r\n            input: [['float', VALUE, 0.5, [0, 1]], ['float', VALUE, 0.5, [0, 1]], ['float', 'opacity', 0.5, [0, 1]]]\r\n        },\r\n        {\r\n            output: 'vec3',\r\n            input: [['vec3', COLOR, [0.5, 0.5, 0.5], [0, 1]], ['vec3', COLOR, [0.5, 0.5, 0.5], [0, 1]]]\r\n        },\r\n        {\r\n            output: 'vec3',\r\n            input: [['vec3', COLOR, [0.5, 0.5, 0.5], [0, 1]], ['vec3', COLOR, [0.5, 0.5, 0.5], [0, 1]], ['float', 'opacity', 0.5, [0, 1]]]\r\n        }\r\n    ],\r\n    transform: (feature) => [{\r\n        output: 'vec2',\r\n        input: [['vec2', POSITION], ...feature.params]\r\n    }],\r\n    modify: (feature) => [{\r\n        output: 'float',\r\n        input: [['float', VALUE, 0.5, [-1, 1]], ...feature.params]\r\n    }, {\r\n        output: 'vec3',\r\n        input: [['vec3', COLOR, [0.5, 0.5, 0.5], [0, 1]], ...feature.params]\r\n    }],\r\n    generator: (feature) => [{\r\n        output: feature.color ? 'vec3' : 'float',\r\n        input: feature.position === false ? feature.params : [['vec2', POSITION], ...feature.params]\r\n    }],\r\n    colorize: (feature) => [\r\n        {\r\n            output: 'vec3',\r\n            input: [['float', VALUE, 0.5, [0, 1]], ...feature.params]\r\n        },\r\n        ...(feature.color\r\n            ? [{\r\n                output: 'vec3',\r\n                input: [['vec3', COLOR, [0.5, 0.5, 0.5], [0, 1]], ...feature.params]\r\n            }]\r\n            : [])\r\n    ],\r\n    desaturate: (feature) => [{\r\n        output: 'float',\r\n        input: [['vec3', COLOR, [0.5, 0.5, 0.5], [0, 1]], ...feature.params]\r\n    }]\r\n};\r\n\r\nfunction getAll() {\r\n    const all = [];\r\n    each(features,\r\n        (k) => each(features[k],\r\n            (m) => features[k][m].variants.forEach((v) => {\r\n                const f = features[k][m];\r\n                v.type = f.type;\r\n                v.name = f.name;\r\n                v.glsl = f.glsl;\r\n                v.variable = hasVariableInput(v);\r\n                v.position = hasPositionInput(v);\r\n                all.push(v);\r\n            })\r\n        )\r\n    );\r\n    return all;\r\n}\r\n\r\nexport function getSignature(v, named = true) {\r\n    return v.output + ' ' + v.glsl + '(' + v.input.map((p) => p[0] + (named ? ' ' + p[1] : '')).join(', ') + ')';\r\n}\r\n\r\nexpand();\r\nexport const all = getAll();\r\n\r\nexport function getProtos(name) {\r\n    return all.filter((d) => d.name === name);\r\n}\r\n\r\nexport function hasVariableInput(v) {\r\n    const arr = (v.input || []);\r\n\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i][1] === VALUE || arr[i][1] === COLOR) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport function hasPositionInput(v) {\r\n    const arr = (v.input || []);\r\n\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i][1] === POSITION) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n","import gltg from '../glt/glsl/glsl.min.glsl';\r\nimport {glsls} from '../glt/src/features/index';\r\n\r\nexport const GLSL = gltg;\r\n\r\nexport function getFragments() {\r\n    const lines = gltg.split('\\n');\r\n\r\n    const ids = [];\r\n    let match = null;\r\n\r\n    lines.forEach((line, i) => {\r\n        if (line[0] === '}') {\r\n            let p = ids[ids.length - 1];\r\n            p.last = i;\r\n            p.lines = lines.slice(p.first, p.last + 1);\r\n        } else if (line[0] === ' ' || line[0] === '#') {\r\n        } else if (match = /^[^ ]+ ([^(]+)/.exec(line)) {\r\n            ids.push({\r\n                name: match[1],\r\n                first: i,\r\n                main: glsls.indexOf(match[1]) >= 0\r\n            });\r\n        }\r\n    });\r\n\r\n    const names = {};\r\n    ids.forEach((ids) => names[ids.name] = true);\r\n    ids.forEach((id) => id.deps = findCalls(id.lines, id.name, names));\r\n\r\n    let dupl = null;\r\n\r\n    while (dupl = findDuplicate(ids)) {\r\n        removeDuplicate(dupl, ids);\r\n    }\r\n\r\n    const ret = {};\r\n\r\n    ids.forEach((id) => {\r\n        ret[id.name] = ret[id.name] || {lines: []};\r\n        ret[id.name].lines = [...ret[id.name].lines, ...id.lines];\r\n\r\n        if (id.deps.length) {\r\n            ret[id.name].deps = ret[id.name].deps || [];\r\n            id.deps.forEach((d) => {\r\n                if (ret[id.name].deps.indexOf(d) === -1) {\r\n                    ret[id.name].deps.push(d);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return ret;\r\n}\r\n\r\nfunction removeDuplicate(dupls, ids) {\r\n    if (dupls[0].main) {\r\n        dupls.reverse();\r\n    }\r\n\r\n    let keep = dupls[1];\r\n    let remove = dupls[0];\r\n\r\n    ids.splice(ids.indexOf(remove), 1);\r\n\r\n    ids.forEach((id) => {\r\n        let ind;\r\n\r\n        if ((ind = id.deps.indexOf(remove.name)) >= 0) {\r\n            id.deps[ind] = keep.name;\r\n\r\n            id.lines.forEach((line, i) => {\r\n                id.lines[i] = line.replace(new RegExp(remove.name + '\\\\(', 'g'), keep.name + '(');\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction findCalls(lines, name, names) {\r\n    const rx = /([a-z0-9_]+)\\(/gi;\r\n    let matches;\r\n    let results = {};\r\n\r\n    while (matches = rx.exec(lines.join('\\n'))) {\r\n        if ((matches[1] !== name) && names[matches[1]]) {\r\n            results[matches[1]] = true;\r\n        }\r\n    }\r\n\r\n    return Object.keys(results);\r\n}\r\n\r\nfunction findDuplicate(ids) {\r\n    ids.forEach((id) => {\r\n        id.simple = simpleFunction(id.lines);\r\n    });\r\n\r\n    let pair = null;\r\n\r\n    ids.forEach((id1, i) => {\r\n        if (pair !== null) {\r\n            return;\r\n        }\r\n\r\n        ids.forEach((id2, j) => {\r\n            if (i === j || pair !== null) {\r\n                return;\r\n            }\r\n\r\n            if (id1.simple === id2.simple) {\r\n                if (!(id1.main && id2.main)) {\r\n                    pair = [id1, id2];\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    ids.forEach((id) => {\r\n        delete id.simple;\r\n    });\r\n\r\n    return pair;\r\n}\r\n\r\nfunction simpleFunction(lines) {\r\n    let first = lines[0].replace(/([a-z0-9]+) [^(]+/i, '$1 function');\r\n    return [first, ...lines.slice(1)].join('\\n');\r\n}\r\n\r\nif(typeof exports === 'object' && typeof module !== 'undefined') {\r\n    console.log(JSON.stringify(getFragments(), null, 2));\r\n}\r\n"],"names":["isObject","obj","Object","Array","each","fnc","keys","forEach","key","blend","POSITION","VALUE","COLOR","POS","Distort","Warp","Rotate","Scale","Translate","Tile","Pixelate","Twirl","Normalize","Denormalize","Invert","Abs","Cos","Sin","AddValue","Min","Max","MultiplyValue","SmoothStep","Posterize","Bias","Gain","Clamp","X","Y","Length","SinX","SinY","SinXY","Xor","Value","SimplexNoise","Checker","PerlinNoise","PeriodicNoise","WorleyF1","WorleyF2","WorleyF1F2","WorleyF2F1","WorleyCrackle","RidgedMultiFractal","HybridMultiFractal","HeteroTerrain","MultiFractal","FBm","RGB","HSV","CosPalette","Tint","Grayscale","features","transform","modify","generator","colorize","desaturate","expand","k","m","f","glsls","expandFeature","type","name","glsl","params","variants","push","feature","color","position","getAll","all","v","variable","hasVariableInput","hasPositionInput","arr","input","i","length","GLSL","gltg","getFragments","lines","split","ids","match","line","p","last","slice","first","exec","indexOf","names","id","deps","findCalls","dupl","findDuplicate","ret","d","removeDuplicate","dupls","main","reverse","keep","remove","splice","ind","replace","RegExp","rx","matches","results","join","simple","simpleFunction","pair","id1","id2","j","exports","module","log","JSON","stringify"],"mappings":";;;;;;;;AAAO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;WAClBA,eAAeC,MAAhB,IAA2B,EAAED,eAAeE,KAAjB,CAAlC;;;ACCG,SAASC,IAAT,CAAcH,GAAd,EAAmBI,GAAnB,EAAwB;QACvBL,SAASC,GAAT,CAAJ,EAAmB;eACRK,IAAP,CAAYL,GAAZ,EAAiBM,OAAjB,CAAyB,UAACC,GAAD;mBAASH,IAAIG,GAAJ,EAASP,IAAIO,GAAJ,CAAT,CAAT;SAAzB;;;;ACJD,IAAMC,QAAQ;aACR,cADQ;gBAEL,iBAFK;iBAGJ,kBAHI;cAIP,eAJO;UAKX,WALW;eAMN,gBANM;aAOR,cAPQ;aAQR,cARQ;YAST,aATS;cAUP,eAVO;cAWP,eAXO;aAYR,cAZQ;aAaR,cAbQ;gBAcL,iBAdK;aAeR,cAfQ;YAgBT,aAhBS;eAiBN,gBAjBM;cAkBP,eAlBO;eAmBN,gBAnBM;gBAoBL,iBApBK;YAqBT,aArBS;gBAsBL,iBAtBK;eAuBN,gBAvBM;SAwBZ,UAxBY;iBAyBJ;CAzBV;;;;ACAA,IAAMC,WAAW,UAAjB;AACP,AAAO,IAAMC,QAAQ,OAAd;AACP,AAAO,IAAMC,QAAQ,OAAd;;AAEP,AAAO,IAAMC,MAAM,KAAZ,CAEP,AAAO,AASP,AAAO,AACP,AAAO,AACP,AAAO;;ACfA,IAAIC,UAAU;YACT,CAAC,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAvB,CAAD,EAAkC,CAAC,OAAD,EAAUH,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAC,CAAF,EAAK,CAAL,CAApB,CAAlC;CADL;;AAIP,AAAO,IAAII,OAAO;YACN,CAAC,CAAC,OAAD,EAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAnB,CAAD,EAA8B,CAAC,OAAD,EAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAnB,CAA9B,EAA2D,CAAC,OAAD,EAAUJ,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAC,CAAF,EAAK,CAAL,CAApB,CAA3D,EAAyF,CAAC,OAAD,EAAUA,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAC,CAAF,EAAK,CAAL,CAApB,CAAzF;CADL;;AAIP,AAAO,IAAMK,SAAS;YACV,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,CAAnB,EAAsB,CAAC,CAAD,EAAI,GAAJ,CAAtB,CAAD;CADL;;AAIP,AAAO,IAAMC,QAAQ;YACT,CAAC,CAAC,MAAD,EAAS,OAAT,EAAkB,CAAC,CAAD,EAAI,CAAJ,CAAlB,EAA0B,CAAC,CAAC,EAAF,EAAM,EAAN,CAA1B,CAAD;CADL;;AAIP,AAAO,IAAMC,YAAY;YACb,CAAC,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAC,CAAD,EAAI,CAAJ,CAAnB,EAA2B,CAAC,CAAC,GAAF,EAAO,GAAP,CAA3B,CAAD;CADL;;AAIP,AAAO,IAAMC,OAAO;YACR,CAAC,CAAC,MAAD,EAAS,MAAT,EAAiB,CAAC,CAAD,EAAI,CAAJ,CAAjB,EAAyB,CAAC,CAAD,EAAI,EAAJ,CAAzB,CAAD,EAAoC,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,CAAJ,CAAxB,CAApC,EAAqE,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,CAAJ,CAAxB,CAArE;CADL;;AAIP,AAAO,IAAMC,WAAW;YACZ,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,CAAnB,EAAsB,CAAC,CAAD,EAAI,GAAJ,CAAtB,CAAD;CADL;;AAIP,AAAO,IAAMC,QAAQ;YACT,CAAC,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAC,EAAF,EAAM,EAAN,CAAvB,CAAD,EAAoC,CAAC,OAAD,EAAU,MAAV,EAAkB,CAAlB,EAAqB,CAAC,CAAD,EAAI,EAAJ,CAArB,CAApC,EAAmE,CAAC,MAAD,EAAS,QAAT,EAAmB,CAAC,CAAD,EAAI,CAAJ,CAAnB,EAA2B,CAAC,CAAD,EAAI,EAAJ,CAA3B,CAAnE;CADL;;;;;;;;;;;;;AC9BA,IAAMC,YAAY,EAAlB;AACP,AAAO,IAAMC,cAAc,EAApB;AACP,AAAO,IAAMC,SAAS,EAAf;AACP,AAAO,IAAMC,MAAM,EAAZ;AACP,AAAO,IAAMC,MAAM,EAAZ;AACP,AAAO,IAAMC,MAAM,EAAZ;;AAEP,AAAO,IAAMC,WAAW;YACZ,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,GAAnB,EAAwB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAAxB,CAAD;CADL;;AAIP,AAAO,IAAMC,MAAM;UACT,KADS;YAEP,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,GAAnB,EAAwB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAAxB,CAAD;CAFL;;AAKP,AAAO,IAAMC,MAAM;UACT,KADS;YAEP,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,GAAnB,EAAwB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAAxB,CAAD;CAFL;;AAKP,AAAO,IAAMC,gBAAgB;YACjB,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,GAAnB,EAAwB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAAxB,CAAD;CADL;;AAIP,AAAO,IAAMC,aAAa;YACd,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,CAAnB,EAAsB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAAtB,CAAD,EAAgC,CAAC,OAAD,EAAU,OAAV,EAAmB,CAAnB,EAAsB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAAtB,CAAhC;CADL;;AAIP,AAAO,IAAMC,YAAY;YACb,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,CAAnB,EAAsB,CAAC,CAAD,EAAG,EAAH,CAAtB,CAAD,EAAgC,CAAC,OAAD,EAAU,OAAV,EAAmB,GAAnB,EAAuB,CAAC,CAAD,EAAG,CAAH,CAAvB,CAAhC;CADL;;AAIP,AAAO,IAAMC,OAAO;YACR,CAAC,CAAC,OAAD,EAAU,MAAV,EAAkB,IAAlB,EAAwB,CAAC,CAAD,EAAG,CAAH,CAAxB,CAAD;CADL;;AAIP,AAAO,IAAMC,OAAO;YACR,CAAC,CAAC,OAAD,EAAU,MAAV,EAAkB,IAAlB,EAAwB,CAAC,CAAD,EAAG,CAAH,CAAxB,CAAD;CADL;;AAIP,AAAO,IAAMC,QAAQ;YACT,CAAC,CAAC,OAAD,EAAU,MAAV,EAAkB,CAAlB,EAAqB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAArB,CAAD,EAA+B,CAAC,OAAD,EAAU,IAAV,EAAgB,CAAhB,EAAmB,CAAC,CAAC,CAAF,EAAI,CAAJ,CAAnB,CAA/B;CADL;;;;;;;;;;;;;;;;;;;;ACvCA,IAAMC,IAAI,EAAV;AACP,AAAO,IAAMC,IAAI,EAAV;AACP,AAAO,IAAMC,SAAS,EAAf;AACP,AAAO,IAAMC,OAAO;WACT;CADJ;AAGP,AAAO,IAAMC,OAAO;WACT;CADJ;AAGP,AAAO,IAAMC,QAAQ;WACV;CADJ;;AAIP,AAAO,IAAMC,MAAM;WACR;CADJ;;;;;;;;;AAWP,AAAO,IAAMC,QAAQ;UACX,OADW;cAEP,KAFO;YAGT,CAAC,CAAC,OAAD,EAAU,OAAV,EAAmB,CAAnB,EAAsB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAtB,CAAD;CAHL;;AAMP,AAAO,IAAMC,eAAe;UAClB,QADkB;gBAEZ;CAFT;;AAKP,AAAO,IAAMC,UAAU;UACb,SADa;YAEX,CAAC,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,GAAJ,CAAxB,CAAD;CAFL;;AAKP,AAAO,IAAMC,cAAc;UACjB,QADiB;gBAEX,KAFW;WAGhB;CAHJ;;AAMP,AAAO,IAAMC,gBAAgB;UACnB,QADmB;YAEjB,CAAC,CAAC,MAAD,EAAS,MAAT,EAAiB,CAAC,EAAD,EAAK,EAAL,CAAjB,EAA2B,CAAC,CAAD,EAAI,GAAJ,CAA3B,CAAD,CAFiB;gBAGb,KAHa;WAIlB;CAJJ;;AAOP,AAAO,IAAMC,WAAW;YACZ,CAAC,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAD,EAAI,CAAJ,CAAvB,CAAD,EAAiC,CAAC,OAAD,EAAU,mBAAV,EAA+B,CAA/B,EAAkC,CAAC,CAAD,EAAI,CAAJ,CAAlC,CAAjC,CADY;WAEb,CAFa;cAGV,CACN,CAAC,GAAD,EAAM,CAAN,CADM,EAEN,CAAC,CAAD,EAAI,CAAJ,CAFM,EAGN,CAAC,CAAD,EAAI,CAAJ,CAHM;CAHP;;AAUP,AAAO,IAAMC,WAAW;YACZ,CAAC,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAD,EAAI,CAAJ,CAAvB,CAAD,EAAiC,CAAC,OAAD,EAAU,mBAAV,EAA+B,CAA/B,EAAkC,CAAC,CAAD,EAAI,CAAJ,CAAlC,CAAjC,CADY;WAEb,CAFa;cAGV,CACN,CAAC,GAAD,EAAM,CAAN,CADM,EAEN,CAAC,CAAD,EAAI,CAAJ,CAFM,EAGN,CAAC,CAAD,EAAI,CAAJ,CAHM;CAHP;;AAUP,AAAO,IAAMC,aAAa;YACd,CAAC,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAD,EAAI,CAAJ,CAAvB,CAAD,EAAiC,CAAC,OAAD,EAAU,mBAAV,EAA+B,CAA/B,EAAkC,CAAC,CAAD,EAAI,CAAJ,CAAlC,CAAjC,CADc;WAEf,CAFe;cAGZ,CACN,CAAC,GAAD,EAAM,CAAN,CADM,EAEN,CAAC,CAAD,EAAI,CAAJ,CAFM,EAGN,CAAC,CAAD,EAAI,CAAJ,CAHM,EAIN,CAAC,CAAD,EAAI,CAAJ,CAJM;CAHP;;AAWP,AAAO,IAAMC,aAAa;YACd,CAAC,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAD,EAAI,CAAJ,CAAvB,CAAD,EAAiC,CAAC,OAAD,EAAU,mBAAV,EAA+B,CAA/B,EAAkC,CAAC,CAAD,EAAI,CAAJ,CAAlC,CAAjC,CADc;WAEf,CAFe;cAGZ,CACN,CAAC,GAAD,EAAM,CAAN,CADM,EAEN,CAAC,CAAD,EAAI,CAAJ,CAFM,EAGN,CAAC,CAAD,EAAI,CAAJ,CAHM;CAHP;;AAUP,AAAO,IAAMC,gBAAgB;YACjB,CAAC,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAD,EAAI,CAAJ,CAAvB,CAAD,EAAiC,CAAC,OAAD,EAAU,mBAAV,EAA+B,CAA/B,EAAkC,CAAC,CAAD,EAAI,CAAJ,CAAlC,CAAjC,EAA4E,CAAC,OAAD,EAAU,UAAV,EAAsB,CAAtB,EAAyB,CAAC,CAAD,EAAI,EAAJ,CAAzB,CAA5E,EAA+G,CAAC,OAAD,EAAU,QAAV,EAAoB,CAApB,EAAuB,CAAC,CAAD,EAAI,EAAJ,CAAvB,CAA/G,EAAgJ,CAAC,OAAD,EAAU,QAAV,EAAoB,GAApB,EAAyB,CAAC,CAAD,EAAI,CAAJ,CAAzB,CAAhJ,CADiB;WAElB,CAFkB;cAGf,CACN,CAAC,GAAD,EAAM,CAAN,EAAS,CAAT,EAAY,CAAZ,EAAe,GAAf,CADM,EAEN,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,GAAb,CAFM,EAGN,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,GAAb,CAHM,EAIN,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,CAAX,EAAc,GAAd,CAJM,EAKN,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,CAAX,EAAc,CAAd,CALM,EAMN,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,CAAX,EAAc,CAAd,CANM,EAON,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,CAAX,EAAc,CAAd,CAPM,EAQN,CAAC,IAAD,EAAO,CAAP,EAAU,EAAV,EAAc,CAAd,EAAiB,CAAjB,CARM;CAHP;;AAeP,AAAO,IAAMC,qBAAqB;UACxB,oBADwB;YAEtB,CAAC,CAAC,OAAD,EAAU,GAAV,EAAe,IAAf,EAAqB,CAAC,CAAD,EAAI,CAAJ,CAArB,CAAD,EAA+B,CAAC,OAAD,EAAU,YAAV,EAAwB,CAAxB,EAA2B,CAAC,CAAD,EAAI,CAAJ,CAA3B,CAA/B,EAAmE,CAAC,OAAD,EAAU,WAAV,EAAuB,CAAvB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CAAnE,EAAsG,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,EAAJ,CAAxB,CAAtG,EAAwI,CAAC,OAAD,EAAU,QAAV,EAAoB,EAApB,EAAwB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAxB,CAAxI,EAA0K,CAAC,OAAD,EAAU,MAAV,EAAkB,GAAlB,EAAuB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAvB,CAA1K,CAFsB;WAGvB,CAHuB;cAIpB,CACN,CAAC,IAAD,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,IAAhB,EAAsB,CAAtB,CADM,EAEN,CAAC,IAAD,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,IAAhB,EAAsB,CAAtB,CAFM;CAJP;;AAUP,AAAO,IAAMC,qBAAqB;UACxB,oBADwB;YAEtB,CAAC,CAAC,OAAD,EAAU,GAAV,EAAe,IAAf,EAAqB,CAAC,CAAD,EAAI,CAAJ,CAArB,CAAD,EAA+B,CAAC,OAAD,EAAU,YAAV,EAAwB,CAAxB,EAA2B,CAAC,CAAD,EAAI,CAAJ,CAA3B,CAA/B,EAAmE,CAAC,OAAD,EAAU,WAAV,EAAuB,CAAvB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CAAnE,EAAsG,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,EAAJ,CAAxB,CAAtG,EAAwI,CAAC,OAAD,EAAU,QAAV,EAAoB,GAApB,EAAyB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAzB,CAAxI,CAFsB;gBAGlB,KAHkB;WAIvB,CAJuB;cAKpB,CACN,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CADM;CALP;;AAUP,AAAO,IAAMC,gBAAgB;UACnB,gBADmB;YAEjB,CAAC,CAAC,OAAD,EAAU,GAAV,EAAe,GAAf,EAAoB,CAAC,IAAD,EAAO,CAAP,CAApB,CAAD,EAAiC,CAAC,OAAD,EAAU,YAAV,EAAwB,CAAxB,EAA2B,CAAC,CAAD,EAAI,CAAJ,CAA3B,CAAjC,EAAqE,CAAC,OAAD,EAAU,WAAV,EAAuB,CAAvB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CAArE,EAAwG,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,CAAJ,CAAxB,CAAxG,EAAyI,CAAC,OAAD,EAAU,QAAV,EAAoB,GAApB,EAAyB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAzB,CAAzI,CAFiB;gBAGb,KAHa;WAIlB,CAJkB;cAKf,CACN,CAAC,CAAD,EAAI,GAAJ,EAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CADM;CALP;;AAUP,AAAO,IAAMC,eAAe;UAClB,eADkB;YAEhB,CACJ,CAAC,OAAD,EAAU,GAAV,EAAe,GAAf,EAAoB,CAAC,IAAD,EAAO,CAAP,CAApB,CADI,EAEJ,CAAC,OAAD,EAAU,YAAV,EAAwB,CAAxB,EAA2B,CAAC,CAAD,EAAI,CAAJ,CAA3B,CAFI,EAGJ,CAAC,OAAD,EAAU,WAAV,EAAuB,CAAvB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CAHI,EAIJ,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,CAAJ,CAAxB,CAJI,EAKJ,CAAC,OAAD,EAAU,QAAV,EAAoB,EAApB,EAAwB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAxB,CALI,EAMJ,CAAC,OAAD,EAAU,OAAV,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,QAA/B,EAAyC,CAAC,CAAC,MAAD,EAAS5C,GAAT,CAAD,CAAzC,CANI,CAFgB;WAUjB,CAViB;cAWd,CACN,CAAC,GAAD,EAAM,GAAN,EAAW,CAAX,EAAc,CAAd,EAAiB,IAAjB,CADM;CAXP;;AAgBP,AAAO,IAAM6C,MAAM;UACT,MADS;YAEP,CAAC,CAAC,OAAD,EAAU,GAAV,EAAe,GAAf,EAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB,CAAD,EAA8B,CAAC,OAAD,EAAU,YAAV,EAAwB,CAAxB,EAA2B,CAAC,CAAD,EAAI,CAAJ,CAA3B,CAA9B,EAAkE,CAAC,OAAD,EAAU,WAAV,EAAuB,CAAvB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CAAlE,EAAqG,CAAC,OAAD,EAAU,SAAV,EAAqB,CAArB,EAAwB,CAAC,CAAD,EAAI,EAAJ,CAAxB,CAArG,CAFO;gBAGH,KAHG;WAIR,CAJQ;cAKL,CACN,CAAC,IAAD,EAAO,GAAP,EAAY,CAAZ,EAAe,CAAf,CADM;CALP;;AAUP,AAAO,IAAIC,MAAM;UACP,MADO;WAEN,IAFM;cAGH,KAHG;YAIL,CAAC,CAAC,OAAD,EAAUhD,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB,CAAD,EAA8B,CAAC,OAAD,EAAUA,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB,CAA9B,EAA2D,CAAC,OAAD,EAAUA,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB,CAA3D;CAJL;;AAOP,AAAO,IAAIiD,MAAM;UACP,KADO;WAEN,IAFM;cAGH,KAHG;YAIL,CAAC,CAAC,OAAD,EAAUjD,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB,CAAD,EAA8B,CAAC,OAAD,EAAUA,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB,CAA9B,EAA2D,CAAC,OAAD,EAAUA,KAAV,EAAiB,CAAjB,EAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB,CAA3D;CAJL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9KP;AACA,AAAO,IAAMkD,aAAa;UAChB,YADgB;YAEd,CACJ,CAAC,MAAD,EAAS,GAAT,EAAc,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAd,EAA+B,CAAC,CAAD,EAAI,CAAJ,CAA/B,CADI,EAEJ,CAAC,MAAD,EAAS,GAAT,EAAc,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAd,EAA+B,CAAC,CAAD,EAAI,CAAJ,CAA/B,CAFI,EAGJ,CAAC,MAAD,EAAS,GAAT,EAAc,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAd,EAA+B,CAAC,CAAD,EAAI,CAAJ,CAA/B,CAHI,EAIJ,CAAC,MAAD,EAAS,GAAT,EAAc,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAAd,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAJI,CAFc;cAQZ,CACN,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnC,EAAoD,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAApD,CADM,EAEN,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnC,EAAoD,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAApD,CAFM,EAGN,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnC,EAAoD,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAApD,CAHM,EAIN,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnC,EAAoD,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAApD,CAJM,EAKN,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnC,EAAoD,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAApD,CALM,EAMN,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnC,EAAoD,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAApD,CANM,EAON,CAAC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAD,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAnC,EAAoD,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAApD,CAPM;CARP;;AAmBP,AAAO,IAAMC,OAAO;WACT,IADS;YAER,CAAC,CAAC,MAAD,EAAS,OAAT,EAAkB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB,EAAmC,CAAC,CAAD,EAAI,CAAJ,CAAnC,CAAD;CAFL;;;;;;;ACpBA,IAAMC,YAAY,EAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACSA,IAAMC,WAAW;WACbvD,KADa;eAETwD,SAFS;YAGZC,MAHY;eAITC,SAJS;cAKVC,QALU;gBAMRC;CANT;;AASP,AAAO;;AASP,SAASC,MAAT,GAAkB;SACTN,QAAL,EAAe,UAACO,CAAD,EAAO;aACbP,SAASO,CAAT,CAAL,EAAkB,UAACC,CAAD,EAAO;;gBAEjBC,IAAIT,SAASO,CAAT,EAAYC,CAAZ,CAAR;;gBAEI,OAAOC,CAAP,KAAa,QAAjB,EAA2B;yBACdF,CAAT,EAAYC,CAAZ,IAAiBC,IAAI;0BACXA;iBADV;;;0BAKUA,CAAd,EAAiBF,CAAjB,EAAoBC,CAApB;SAVJ;KADJ;;;AAgBJ,AAAO,IAAME,QAAQ,EAAd;;AAEP,SAASC,aAAT,CAAuBF,CAAvB,EAA0BF,CAA1B,EAA6BC,CAA7B,EAAgC;MAC1BI,IAAF,GAASL,CAAT;MACEM,IAAF,GAASL,CAAT;MACEM,IAAF,GAASL,EAAEK,IAAF,IAAUN,CAAnB;MACEO,MAAF,GAAWN,EAAEM,MAAF,IAAY,EAAvB;MACEC,QAAF,GAAaA,SAAST,CAAT,EAAYE,CAAZ,CAAb;;UAEMQ,IAAN,CAAWR,EAAEK,IAAb;;;AAGJ,IAAME,WAAW;WACN;eAAM,CACT;oBACY,OADZ;mBAEW,CAAC,CAAC,OAAD,EAAUrE,KAAV,EAAiB,GAAjB,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAAD,EAAgC,CAAC,OAAD,EAAUA,KAAV,EAAiB,GAAjB,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAAhC;SAHF,EAKT;oBACY,OADZ;mBAEW,CAAC,CAAC,OAAD,EAAUA,KAAV,EAAiB,GAAjB,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAAD,EAAgC,CAAC,OAAD,EAAUA,KAAV,EAAiB,GAAjB,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAAhC,EAA+D,CAAC,OAAD,EAAU,SAAV,EAAqB,GAArB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CAA/D;SAPF,EAST;oBACY,MADZ;mBAEW,CAAC,CAAC,MAAD,EAASC,KAAT,EAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAAD,EAA2C,CAAC,MAAD,EAASA,KAAT,EAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAA3C;SAXF,EAaT;oBACY,MADZ;mBAEW,CAAC,CAAC,MAAD,EAASA,KAAT,EAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAAD,EAA2C,CAAC,MAAD,EAASA,KAAT,EAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAA3C,EAAqF,CAAC,OAAD,EAAU,SAAV,EAAqB,GAArB,EAA0B,CAAC,CAAD,EAAI,CAAJ,CAA1B,CAArF;SAfF,CAAN;KADM;eAmBF,mBAACsE,OAAD;eAAa,CAAC;oBACb,MADa;oBAEb,CAAC,MAAD,EAASxE,QAAT,CAAR,2BAA+BwE,QAAQH,MAAvC;SAFoB,CAAb;KAnBE;YAuBL,gBAACG,OAAD;eAAa,CAAC;oBACV,OADU;oBAEV,CAAC,OAAD,EAAUvE,KAAV,EAAiB,GAAjB,EAAsB,CAAC,CAAC,CAAF,EAAK,CAAL,CAAtB,CAAR,2BAA2CuE,QAAQH,MAAnD;SAFiB,EAGlB;oBACS,MADT;oBAES,CAAC,MAAD,EAASnE,KAAT,EAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAAR,2BAAqDsE,QAAQH,MAA7D;SALiB,CAAb;KAvBK;eA8BF,mBAACG,OAAD;eAAa,CAAC;oBACbA,QAAQC,KAAR,GAAgB,MAAhB,GAAyB,OADZ;mBAEdD,QAAQE,QAAR,KAAqB,KAArB,GAA6BF,QAAQH,MAArC,IAA+C,CAAC,MAAD,EAASrE,QAAT,CAA/C,2BAAsEwE,QAAQH,MAA9E;SAFa,CAAb;KA9BE;cAkCH,kBAACG,OAAD;gBACN;oBACY,MADZ;oBAEY,CAAC,OAAD,EAAUvE,KAAV,EAAiB,GAAjB,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAAR,2BAA0CuE,QAAQH,MAAlD;SAHE,2BAKFG,QAAQC,KAAR,GACE,CAAC;oBACS,MADT;oBAES,CAAC,MAAD,EAASvE,KAAT,EAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAAR,2BAAqDsE,QAAQH,MAA7D;SAFF,CADF,GAKE,EAVA;KAlCG;gBA8CD,oBAACG,OAAD;eAAa,CAAC;oBACd,OADc;oBAEd,CAAC,MAAD,EAAStE,KAAT,EAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAhB,EAAiC,CAAC,CAAD,EAAI,CAAJ,CAAjC,CAAR,2BAAqDsE,QAAQH,MAA7D;SAFqB,CAAb;;CA9ChB;;AAoDA,SAASM,MAAT,GAAkB;QACRC,MAAM,EAAZ;SACKtB,QAAL,EACI,UAACO,CAAD;eAAOnE,KAAK4D,SAASO,CAAT,CAAL,EACH,UAACC,CAAD;mBAAOR,SAASO,CAAT,EAAYC,CAAZ,EAAeQ,QAAf,CAAwBzE,OAAxB,CAAgC,UAACgF,CAAD,EAAO;oBACpCd,IAAIT,SAASO,CAAT,EAAYC,CAAZ,CAAV;kBACEI,IAAF,GAASH,EAAEG,IAAX;kBACEC,IAAF,GAASJ,EAAEI,IAAX;kBACEC,IAAF,GAASL,EAAEK,IAAX;kBACEU,QAAF,GAAaC,iBAAiBF,CAAjB,CAAb;kBACEH,QAAF,GAAaM,iBAAiBH,CAAjB,CAAb;oBACIN,IAAJ,CAASM,CAAT;aAPG,CAAP;SADG,CAAP;KADJ;WAaOD,GAAP;;;AAGJ,AAAO;;AAIPhB;AACA,AAAO,IAAMgB,MAAMD,QAAZ;;AAEP,AAAO;;AAIP,AAAO,SAASI,gBAAT,CAA0BF,CAA1B,EAA6B;QAC1BI,MAAOJ,EAAEK,KAAF,IAAW,EAAxB;;SAEK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,IAAIG,MAAxB,EAAgCD,GAAhC,EAAqC;YAC7BF,IAAIE,CAAJ,EAAO,CAAP,MAAclF,KAAd,IAAuBgF,IAAIE,CAAJ,EAAO,CAAP,MAAcjF,KAAzC,EAAgD;mBACrC,IAAP;;;;WAID,KAAP;;;AAGJ,AAAO,SAAS8E,gBAAT,CAA0BH,CAA1B,EAA6B;QAC1BI,MAAOJ,EAAEK,KAAF,IAAW,EAAxB;;SAEK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,IAAIG,MAAxB,EAAgCD,GAAhC,EAAqC;YAC7BF,IAAIE,CAAJ,EAAO,CAAP,MAAcnF,QAAlB,EAA4B;mBACjB,IAAP;;;;WAID,KAAP;;;AC3JG,IAAMqF,OAAOC,IAAb;;AAEP,AAAO,SAASC,YAAT,GAAwB;QACrBC,QAAQF,KAAKG,KAAL,CAAW,IAAX,CAAd;;QAEMC,MAAM,EAAZ;QACIC,QAAQ,IAAZ;;UAEM9F,OAAN,CAAc,UAAC+F,IAAD,EAAOT,CAAP,EAAa;YACnBS,KAAK,CAAL,MAAY,GAAhB,EAAqB;gBACbC,IAAIH,IAAIA,IAAIN,MAAJ,GAAa,CAAjB,CAAR;cACEU,IAAF,GAASX,CAAT;cACEK,KAAF,GAAUA,MAAMO,KAAN,CAAYF,EAAEG,KAAd,EAAqBH,EAAEC,IAAF,GAAS,CAA9B,CAAV;SAHJ,MAIO,IAAIF,KAAK,CAAL,MAAY,GAAZ,IAAmBA,KAAK,CAAL,MAAY,GAAnC,EAAwC,EAAxC,MACA,IAAID,QAAQ,iBAAiBM,IAAjB,CAAsBL,IAAtB,CAAZ,EAAyC;gBACxCrB,IAAJ,CAAS;sBACCoB,MAAM,CAAN,CADD;uBAEER,CAFF;sBAGCnB,MAAMkC,OAAN,CAAcP,MAAM,CAAN,CAAd,KAA2B;aAHrC;;KAPR;;QAeMQ,QAAQ,EAAd;QACItG,OAAJ,CAAY,UAAC6F,GAAD;eAASS,MAAMT,IAAIvB,IAAV,IAAkB,IAA3B;KAAZ;QACItE,OAAJ,CAAY,UAACuG,EAAD;eAAQA,GAAGC,IAAH,GAAUC,UAAUF,GAAGZ,KAAb,EAAoBY,GAAGjC,IAAvB,EAA6BgC,KAA7B,CAAlB;KAAZ;;QAEII,OAAO,IAAX;;WAEOA,OAAOC,cAAcd,GAAd,CAAd,EAAkC;wBACda,IAAhB,EAAsBb,GAAtB;;;QAGEe,MAAM,EAAZ;;QAEI5G,OAAJ,CAAY,UAACuG,EAAD,EAAQ;YACZA,GAAGjC,IAAP,IAAesC,IAAIL,GAAGjC,IAAP,KAAgB,EAACqB,OAAO,EAAR,EAA/B;YACIY,GAAGjC,IAAP,EAAaqB,KAAb,+BAAyBiB,IAAIL,GAAGjC,IAAP,EAAaqB,KAAtC,qBAAgDY,GAAGZ,KAAnD;;YAEIY,GAAGC,IAAH,CAAQjB,MAAZ,EAAoB;gBACZgB,GAAGjC,IAAP,EAAakC,IAAb,GAAoBI,IAAIL,GAAGjC,IAAP,EAAakC,IAAb,IAAqB,EAAzC;eACGA,IAAH,CAAQxG,OAAR,CAAgB,UAAC6G,CAAD,EAAO;oBACfD,IAAIL,GAAGjC,IAAP,EAAakC,IAAb,CAAkBH,OAAlB,CAA0BQ,CAA1B,MAAiC,CAAC,CAAtC,EAAyC;wBACjCN,GAAGjC,IAAP,EAAakC,IAAb,CAAkB9B,IAAlB,CAAuBmC,CAAvB;;aAFR;;KANR;;WAcOD,GAAP;;;AAGJ,SAASE,eAAT,CAAyBC,KAAzB,EAAgClB,GAAhC,EAAqC;QAC7BkB,MAAM,CAAN,EAASC,IAAb,EAAmB;cACTC,OAAN;;;QAGAC,OAAOH,MAAM,CAAN,CAAX;QACII,SAASJ,MAAM,CAAN,CAAb;;QAEIK,MAAJ,CAAWvB,IAAIQ,OAAJ,CAAYc,MAAZ,CAAX,EAAgC,CAAhC;;QAEInH,OAAJ,CAAY,UAACuG,EAAD,EAAQ;YACZc,YAAJ;;YAEI,CAACA,MAAMd,GAAGC,IAAH,CAAQH,OAAR,CAAgBc,OAAO7C,IAAvB,CAAP,KAAwC,CAA5C,EAA+C;eACxCkC,IAAH,CAAQa,GAAR,IAAeH,KAAK5C,IAApB;;eAEGqB,KAAH,CAAS3F,OAAT,CAAiB,UAAC+F,IAAD,EAAOT,CAAP,EAAa;mBACvBK,KAAH,CAASL,CAAT,IAAcS,KAAKuB,OAAL,CAAa,IAAIC,MAAJ,CAAWJ,OAAO7C,IAAP,GAAc,KAAzB,EAAgC,GAAhC,CAAb,EAAmD4C,KAAK5C,IAAL,GAAY,GAA/D,CAAd;aADJ;;KANR;;;AAaJ,SAASmC,SAAT,CAAmBd,KAAnB,EAA0BrB,IAA1B,EAAgCgC,KAAhC,EAAuC;QAC7BkB,KAAK,kBAAX;QACIC,gBAAJ;QACIC,UAAU,EAAd;;WAEOD,UAAUD,GAAGpB,IAAH,CAAQT,MAAMgC,IAAN,CAAW,IAAX,CAAR,CAAjB,EAA4C;YACnCF,QAAQ,CAAR,MAAenD,IAAhB,IAAyBgC,MAAMmB,QAAQ,CAAR,CAAN,CAA7B,EAAgD;oBACpCA,QAAQ,CAAR,CAAR,IAAsB,IAAtB;;;;WAID9H,OAAOI,IAAP,CAAY2H,OAAZ,CAAP;;;AAGJ,SAASf,aAAT,CAAuBd,GAAvB,EAA4B;QACpB7F,OAAJ,CAAY,UAACuG,EAAD,EAAQ;WACbqB,MAAH,GAAYC,eAAetB,GAAGZ,KAAlB,CAAZ;KADJ;;QAIImC,OAAO,IAAX;;QAEI9H,OAAJ,CAAY,UAAC+H,GAAD,EAAMzC,CAAN,EAAY;YAChBwC,SAAS,IAAb,EAAmB;;;;YAIf9H,OAAJ,CAAY,UAACgI,GAAD,EAAMC,CAAN,EAAY;gBAChB3C,MAAM2C,CAAN,IAAWH,SAAS,IAAxB,EAA8B;;;;gBAI1BC,IAAIH,MAAJ,KAAeI,IAAIJ,MAAvB,EAA+B;oBACvB,EAAEG,IAAIf,IAAJ,IAAYgB,IAAIhB,IAAlB,CAAJ,EAA6B;2BAClB,CAACe,GAAD,EAAMC,GAAN,CAAP;;;SAPZ;KALJ;;QAkBIhI,OAAJ,CAAY,UAACuG,EAAD,EAAQ;eACTA,GAAGqB,MAAV;KADJ;;WAIOE,IAAP;;;AAGJ,SAASD,cAAT,CAAwBlC,KAAxB,EAA+B;QACvBQ,QAAQR,MAAM,CAAN,EAAS2B,OAAT,CAAiB,oBAAjB,EAAuC,aAAvC,CAAZ;WACO,CAACnB,KAAD,2BAAWR,MAAMO,KAAN,CAAY,CAAZ,CAAX,GAA2ByB,IAA3B,CAAgC,IAAhC,CAAP;;;AAGJ,IAAG,QAAOO,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+B,OAAOC,MAAP,KAAkB,WAApD,EAAiE;YACrDC,GAAR,CAAYC,KAAKC,SAAL,CAAe5C,cAAf,EAA+B,IAA/B,EAAqC,CAArC,CAAZ;;;;;;;;"}